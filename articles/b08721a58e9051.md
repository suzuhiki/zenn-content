---
title: "VSCodeのCopilot ChatでSerena MCPサーバーを利用する"
emoji: "🚙"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["MCP", "Copilot"]
published: true
---

# はじめに
MCPをVSCodeのCopilot Chatで利用するにあたっての備忘録です。

参考サイト：
https://zenn.dev/aiiro/articles/4138d891fb943a
https://qiita.com/masakinihirota/items/a2c0ef5e6f9a0aa868d1

# 作業
### Serenaのmcp設定を記述する
SerenaはVSCodeのMCP マーケットプレイス(2025/10/27日現在preview版)でも利用できますが、オンボーディングを実行すると`Project not found`というエラーが出ました。
そのため、mcp.jsonに設定を記述する方針で作業します。

今回はプロジェクトルートに設定ファイルを配置します。
グローバスな設定も可能だと思います(未検証)。
`.vscode/mcp.json`を作成し、以下の内容を記述します。

```json
{
    "servers": {
        "serena" : {
            "command": "uvx",
            "args": [
                "--from",
                "git+https://github.com/oraios/serena",
                "serena",
                "start-mcp-server",
                "--context",
                "ide-assistant",
                "--project",
                "$(pwd)"
            ]
        }
    }
}
```

Serenaを起動してみます。
VS Codeのコマンドパレットで`>MCP list servers`と入力し、serenaを選択して起動します。
実際に利用する際にはVS Codeの設定の`chat.mcp.autostart`の設定をすることで自動で起動させることができます。

### オンボーディング
Serenaの起動が確認できたらオンボーディングを行います。
Copilot Chatのウィンドウを開き、"serena mcpのオンボーディングを行ってください"などと指示すると処理が始まります。

![Copilot Chatのウィンドウ](/images/mcp_onboarding.png)

.serenaディレクトリがプロジェクトルートに作成されれば成功です。

# おわりに
何かの参考になれば幸いです。

